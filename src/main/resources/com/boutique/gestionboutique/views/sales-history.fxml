<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<?import javafx.scene.shape.Circle?>
<VBox spacing="20" style="-fx-background-color: #ECECEF;" stylesheets="@../stylesheets/sales.css" xmlns="http://javafx.com/javafx/25" xmlns:fx="http://javafx.com/fxml/1" fx:controller="com.boutique.gestionboutique.controller.SalesHistoryController">

    <padding>
        <Insets bottom="25" left="30" right="30" top="25" />
    </padding>
    <HBox alignment="CENTER_LEFT" spacing="20.0">
        <children>
            <Label styleClass="page-title" text="Sales History" />
            <Region HBox.hgrow="ALWAYS" />
            <Button onAction="#handleExportCSV" styleClass="btn-refresh" text="ðŸ“¥ Export CSV" />

            <HBox alignment="CENTER" spacing="10.0" styleClass="profile-container">
                <children>

                    <Label styleClass="profile-name" text="Admin" />
                    <StackPane>
                        <children>
                            <Circle fill="#e0e0e0" radius="18.0" />
                            <Label text="A" textFill="#666" />
                        </children>
                    </StackPane>
                </children>
            </HBox>
        </children>
    </HBox>

    <VBox spacing="15">

        <HBox spacing="20">
            <VBox spacing="10" HBox.hgrow="ALWAYS" styleClass="stat-card">
                <Label style="-fx-font-family: 'Poppins Medium'; -fx-font-size: 14px; -fx-text-fill: #444;" text="Total des Ventes" />
                <Label fx:id="totalSalesLabel" style="-fx-font-family: 'Poppins Bold'; -fx-font-weight: bold; -fx-font-size: 24px; -fx-text-fill: #333;" text="0 MAD" />
                <Label fx:id="totalSalesCount" style="-fx-font-family: 'Poppins Regular'; -fx-font-size: 12px; -fx-text-fill: #444;" text="0 ventes" />
            </VBox>

            <VBox spacing="10" HBox.hgrow="ALWAYS" styleClass="stat-card">
                <Label style="-fx-font-family: 'Poppins Medium'; -fx-font-size: 14px; -fx-text-fill: #444;" text="Ventes Aujourd'hui" />
                <Label fx:id="todaySalesLabel" style="-fx-font-family: 'Poppins Bold'; -fx-font-weight: bold; -fx-font-size: 24px; -fx-text-fill: #333;" text="0" />
                <Label fx:id="todaySalesAmount" style="-fx-font-family: 'Poppins Regular'; -fx-font-size: 12px; -fx-text-fill: #444;" text="0 MAD" />
            </VBox>

            <VBox spacing="10" HBox.hgrow="ALWAYS" styleClass="stat-card">
                <Label style="-fx-font-family: 'Poppins Medium'; -fx-font-size: 14px; -fx-text-fill: #444;" text="Moyenne / vente" />
                <Label fx:id="averageSaleLabel" style="-fx-font-family: 'Poppins Bold'; -fx-font-weight: bold; -fx-font-size: 24px; -fx-text-fill: #333;" text="0 MAD" />
            </VBox>
        </HBox>
    </VBox>

    <HBox alignment="CENTER" spacing="15">
        <TextField fx:id="searchField" promptText="ðŸ” Rechercher par ID" styleClass="search-field" HBox.hgrow="ALWAYS" />
        <Button fx:id="refreshButton" onAction="#handleRefresh" styleClass="btn-refresh" text="ðŸ”„ Actualiser" />
    </HBox>

    <VBox spacing="15" VBox.vgrow="ALWAYS">
        <HBox alignment="CENTER_LEFT">
            <Label style="-fx-font-family: 'Poppins SemiBold'; -fx-font-weight: bold; -fx-font-size: 18px; -fx-text-fill: #222;" text="ðŸ“‹ Liste des Ventes" />
            <Region HBox.hgrow="ALWAYS" />
            <Label fx:id="countLabel" text="0 ventes" />
        </HBox>

        <Pagination fx:id="pagination" VBox.vgrow="ALWAYS" />
    </VBox>

    <fx:define>
        <TableView fx:id="salesTable" styleClass="modern-table">
            <columns>
                <TableColumn fx:id="idColumn" prefWidth="100" text="ID" />
                <TableColumn fx:id="dateColumn" prefWidth="250" text="Date &amp; Heure" />
                <TableColumn fx:id="totalColumn" prefWidth="150" text="Montant" />
                <TableColumn fx:id="actionColumn" prefWidth="150" text="Actions" />
            </columns>
            <columnResizePolicy><TableView fx:constant="CONSTRAINED_RESIZE_POLICY" /></columnResizePolicy>
        </TableView>
    </fx:define>

</VBox>